<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notificaciones Push</title>
    <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async></script>
</head>
<body>

    <h1>Suscripci√≥n a Notificaciones</h1>
    <button id="subscribeBtn">Suscribirse</button>

    <script>
        var OneSignal = window.OneSignal || [];
        OneSignal.push(function() {
            OneSignal.init({
                appId: "0c659218-a807-4d73-878a-c184031fd78b",
                notifyButton: { enable: true } // Bot√≥n de suscripci√≥n flotante
            });

            // Detectar cambios en la suscripci√≥n
            OneSignal.on('subscriptionChange', function(isSubscribed) {
                if (isSubscribed) {
                    OneSignal.getUserId().then(function(userId) {
                        alert(`‚úÖ Usuario suscrito con ID: ${userId}`);
                    });
                } else {
                    alert("‚ö†Ô∏è El usuario cancel√≥ la suscripci√≥n.");
                }
            });

            // Verificar si ya est√° suscrito
            OneSignal.isPushNotificationsEnabled().then(function(isEnabled) {
                if (isEnabled) {
                    OneSignal.getUserId().then(function(userId) {
                        alert(`üîî Ya est√°s suscrito. Tu ID: ${userId}`);
                    });
                } else {
                    document.getElementById("subscribeBtn").addEventListener("click", function() {
                        OneSignal.registerForPushNotifications();
                    });
                }
            });
        });
    </script>

</body>
</html>
